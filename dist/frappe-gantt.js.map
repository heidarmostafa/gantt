{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap eb894c33f531697ce3df","webpack:///./src/Gantt.js","webpack:///./src/gantt.scss?b27d","webpack:///./src/gantt.scss","webpack:///./~/css-loader/lib/css-base.js","webpack:///./~/style-loader/addStyles.js","webpack:///./src/Bar.js","webpack:///./src/Arrow.js"],"names":["Gantt","element","tasks","config","lhsList","self","init","set_defaults","change_view_mode","unselect_all","view_is","get_bar","trigger_event","refresh","view_mode","defaults","header_height","column_width","step","view_modes","bar","height","arrow","curve","padding","date_format","custom_popup_html","Object","assign","reset_variables","calculateParentStart","childNodes","find","e","start","getTime","map","sort","calculateParentEnd","end","reverse","getTasks","passedTasks","allTasks","console","log","t","parent","isParent","children","name","id","push","c","concat","_tasks","_bars","_arrows","element_groups","listGroups","updated_tasks","mode","set_scale","prepare","render","prepare_tasks","prepare_dependencies","prepare_dates","prepare_canvas","task","i","_start","moment","_end","_index","startOf","add","clone","invalid","dependencies","deps","split","d","trim","filter","generate_id","dependency_map","gantt_start","gantt_end","set_gantt_dates","setup_dates","canvas","Snap","addClass","clear","setup_groups","make_grid","make_dates","make_bars","make_arrows","map_arrows_on_bars","set_width","set_scroll_position","bind_grid_click","subtract","endOf","dates","cur_date","groups","group","attr","scale","cur_width","node","getBoundingClientRect","width","actual_width","select","parent_element","document","querySelector","parentElement","scroll_pos","get_min_date","diff","scrollLeft","reduce","acc","curr","isSameOrBefore","make_grid_background","make_grid_rows","make_grid_header","make_grid_ticks","make_grid_highlights","grid_width","length","grid_height","rect","appendTo","grid","header_width","rows","lines","list","listGroup","row_width","row_height","row_y","line","text","tick_x","tick_y","tick_height","date","tick_class","day","month","path","format","x","y","daysInMonth","get_dates_to_draw","lower_x","lower_y","lower_text","upper_text","$upper_text","upper_x","upper_y","getBBox","x2","remove","last_date","get_date_info","date_text","year","base_pos","x_pos","arrows","dependency","get_task","dep","from_task","to_task","click","details","selectAll","forEach","el","removeClass","modes","Array","isArray","Math","random","toString","slice","event","args","apply","Bar","gt","draw","bind","action_completed","prepare_values","prepare_plugins","compute_x","compute_y","corner_radius","duration","progress_width","progress","custom_class","bar_group","handle_group","plugin","Element","Paper","global","Fragment","prototype","getX","getY","getWidth","getHeight","getEndX","draw_bar","draw_progress_bar","draw_label","draw_resize_handles","$bar","$bar_progress","update_label_position","handle_width","polygon","get_progress_polygon_points","bar_progress","setup_click_event","show_details","bind_resize","bind_drag","bind_resize_progress","popover_group","details_box","render_details","f","shadow","get_details_position","transform","html","get_details_html","foreign_object","parse","append","isFunction","start_date","end_date","heading","line_1","line_2","get_handles","left","right","drag","onmove_left","onstart","onstop_left","onmove_right","onstop_right","dx","dy","onmove_handle_right","onstop_handle_right","onmove_handle_left","onstop_handle_left","onmove","onstop","handle","on_move","on_start","on_stop","max_dx","min_dx","owidth","finaldx","progress_changed","set_action_completed","ox","oy","run_method_for_dependencies","get_snap_position","update_bar_position","date_changed","window","gantt_chart","fn","dm","deptask","dt","xs","valid_x","prev","update_attr","update_handle_position","update_progressbar_position","update_arrow_position","update_details_position","hasClass","toggleClass","compute_start_end_date","new_start_date","new_end_date","Date","_d","new_progress","compute_progress","setTimeout","x_in_units","width_in_units","parseInt","odx","rem","position","value","isNaN","label","update","functionToCheck","getType","call","Arrow","start_x","condition","start_y","end_x","end_y","from_is_below_to","clockwise","curve_y","offset","down_1","down_2"],"mappings":"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A,iBAAgB,sBAAsB;AACtC;AACA;AACA,mBAAkB,2BAA2B;AAC7C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,gBAAe,mBAAmB;AAClC;AACA;AACA;AACA;AACA,kBAAiB,2BAA2B;AAC5C;AACA;AACA,SAAQ,uBAAuB;AAC/B;AACA;AACA,IAAG;AACH;AACA,kBAAiB,uBAAuB;AACxC;AACA;AACA,4BAA2B;AAC3B;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,iBAAiB;AAChC;AACA;AACA;AACA;AACA;AACA,eAAc;AACd;AACA,iCAAgC,sBAAsB;AACtD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA,IAAG;AACH;AACA;AACA;AACA,GAAE;AACF;AACA,GAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;;AAEA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,wDAAuD;AACvD;;AAEA,8BAA6B,mBAAmB;;AAEhD;;AAEA;;AAEA;AACA;AACA;;;;;;;;;;;;mBC5OwBqM,G;AATxB;AACA;;;;;;;;AAQe,UAASA,GAAT,CAAaC,EAAb,EAAiBtI,IAAjB,EAAuB;;AAErC,MAAMhE,O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","file":"frappe-gantt.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"Gantt\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Gantt\"] = factory();\n\telse\n\t\troot[\"Gantt\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap eb894c33f531697ce3df\n **/","/* global moment, Snap */\n/**\n * Gantt:\n *    element: querySelector string, required\n *    tasks: array of tasks, required\n *   task: { id, name, start, end, progress, dependencies, custom_class }\n *    config: configuration options, optional\n */\nimport './gantt.scss';\n\nimport Bar from './Bar';\nimport Arrow from './Arrow';\n\nexport default function Gantt(element, tasks, config, lhsList) {\n\n    const self = {};\n\n    function init() {\n        set_defaults();\n\n        // expose methods\n        self.change_view_mode = change_view_mode;\n        self.unselect_all = unselect_all;\n        self.view_is = view_is;\n        self.get_bar = get_bar;\n        self.trigger_event = trigger_event;\n        self.refresh = refresh;\n\n        // initialize with default view mode\n        change_view_mode(self.config.view_mode);\n    }\n\n    function set_defaults() {\n\n        const defaults = {\n            header_height: 50,\n            column_width: 30,\n            step: 24,\n            view_modes: [\n                'Quarter Day',\n                'Half Day',\n                'Day',\n                'Week',\n                'Month'\n            ],\n            bar: {\n                height: 20\n            },\n            arrow: {\n                curve: 5\n            },\n            padding: 18,\n            view_mode: 'Day',\n            date_format: 'YYYY-MM-DD',\n            custom_popup_html: null\n        };\n        self.config = Object.assign({}, defaults, config);\n\n        reset_variables(tasks);\n    }\n\n    function calculateParentStart(childNodes) {\n        return childNodes.find((e) => {\n            return e.start.getTime() === childNodes.map((e => e.start.getTime())).sort()[0];\n        }).start;\n    }\n\n    function calculateParentEnd(childNodes) {\n        return childNodes.find((e) => {\n            return e.end.getTime() === childNodes.map((e => e.end.getTime())).sort().reverse()[0];\n        }).end;\n    }\n\n    function getTasks(passedTasks) {\n        let allTasks = [];\n        if(passedTasks) {\n            tasks = passedTasks;\n        }\n        console.log('getTasks', passedTasks);\n        for (let t of tasks) {\n            let parent = {\n                isParent: true,\n                start: calculateParentStart(t.children),\n                end: calculateParentEnd(t.children),\n                name: t.name,\n                id: t.id,\n                children: t.children\n            };\n            allTasks.push(parent);\n            t.children = t.children.map((c) => {\n                c.parent = parent;\n                return c;\n            });\n            allTasks = allTasks.concat(t.children);\n        }\n        return allTasks;\n    }\n\n    function reset_variables(tasks) {\n\n        self.element = element;\n        self.lhsList = lhsList;\n        self._tasks = getTasks(tasks);\n        self._bars = [];\n        self._bars = [];\n        self._arrows = [];\n        self.element_groups = {};\n        self.listGroups = {};\n    }\n\n    function refresh(updated_tasks) {\n        console.log('updated_tasks', updated_tasks);\n        reset_variables(updated_tasks);\n        change_view_mode(self.config.view_mode);\n    }\n\n    function change_view_mode(mode) {\n        set_scale(mode);\n        prepare();\n        render();\n        // fire viewmode_change event\n        trigger_event('view_change', [mode]);\n    }\n\n    function prepare() {\n        prepare_tasks();\n        prepare_dependencies();\n        prepare_dates();\n        prepare_canvas();\n    }\n\n    function prepare_tasks() {\n\n        // prepare tasks\n        self.tasks = self._tasks.map((task, i) => {\n\n            // momentify\n            task._start = moment(task.start, self.config.date_format);\n            task._end = moment(task.end, self.config.date_format);\n\n            // cache index\n            task._index = i;\n\n            // invalid dates\n            if (!task.start && !task.end) {\n                task._start = moment().startOf('day');\n                task._end = moment().startOf('day').add(2, 'days');\n            }\n            if (!task.start && task.end) {\n                task._start = task._end.clone().add(-2, 'days');\n            }\n            if (task.start && !task.end) {\n                task._end = task._start.clone().add(2, 'days');\n            }\n\n            // invalid flag\n            if (!task.start || !task.end) {\n                task.invalid = true;\n            }\n\n            // dependencies\n            if (typeof task.dependencies === 'string' || !task.dependencies) {\n                let deps = [];\n                if (task.dependencies) {\n                    deps = task.dependencies\n                        .split(',')\n                        .map(d => d.trim())\n                        .filter((d) => d);\n                }\n                task.dependencies = deps;\n            }\n\n            // uids\n            if (!task.id) {\n                task.id = generate_id(task);\n            }\n\n            return task;\n        });\n    }\n\n    function prepare_dependencies() {\n\n        self.dependency_map = {};\n        for (let t of self.tasks) {\n            for (let d of t.dependencies) {\n                self.dependency_map[d] = self.dependency_map[d] || [];\n                self.dependency_map[d].push(t.id);\n            }\n        }\n    }\n\n    function prepare_dates() {\n\n        self.gantt_start = self.gantt_end = null;\n        for (let task of self.tasks) {\n            // set global start and end date\n            if (!self.gantt_start || task._start < self.gantt_start) {\n                self.gantt_start = task._start;\n            }\n            if (!self.gantt_end || task._end > self.gantt_end) {\n                self.gantt_end = task._end;\n            }\n        }\n        set_gantt_dates();\n        setup_dates();\n    }\n\n    function prepare_canvas() {\n        // if (self.canvas && self.lhsList) return;\n        self.canvas = Snap(self.element).addClass('gantt');\n        self.lhsList = Snap(self.lhsList).addClass('gantt-list');\n    }\n\n    function render() {\n        clear();\n        setup_groups();\n        make_grid();\n        make_dates();\n        make_bars();\n        make_arrows();\n        map_arrows_on_bars();\n        set_width();\n        set_scroll_position();\n        bind_grid_click();\n    }\n\n    function clear() {\n        self.canvas.clear();\n        self._bars = [];\n        self._arrows = [];\n    }\n\n    function set_gantt_dates() {\n\n        if (view_is(['Quarter Day', 'Half Day'])) {\n            self.gantt_start = self.gantt_start.clone().subtract(7, 'day');\n            self.gantt_end = self.gantt_end.clone().add(7, 'day');\n        } else if (view_is('Month')) {\n            self.gantt_start = self.gantt_start.clone().startOf('year');\n            self.gantt_end = self.gantt_end.clone().endOf('month').add(1, 'year');\n        } else {\n            self.gantt_start = self.gantt_start.clone().startOf('month').subtract(1, 'month');\n            self.gantt_end = self.gantt_end.clone().endOf('month').add(1, 'month');\n        }\n    }\n\n    function setup_dates() {\n\n        self.dates = [];\n        let cur_date = null;\n\n        while (cur_date === null || cur_date < self.gantt_end) {\n            if (!cur_date) {\n                cur_date = self.gantt_start.clone();\n            } else {\n                cur_date = view_is('Month') ?\n                    cur_date.clone().add(1, 'month') :\n                    cur_date.clone().add(self.config.step, 'hours');\n            }\n            self.dates.push(cur_date);\n        }\n    }\n\n    function setup_groups() {\n\n        const groups = ['grid', 'date', 'arrow', 'progress', 'bar', 'details'];\n        // make group layers\n        for (let group of groups) {\n            self.element_groups[group] = self.canvas.group().attr({'id': group});\n        }\n        self.listGroups['listGroup'] = self.lhsList.group().attr({'id': 'listGroup'});\n    }\n\n    function set_scale(scale) {\n        self.config.view_mode = scale;\n\n        if (scale === 'Day') {\n            self.config.step = 24;\n            self.config.column_width = 38;\n        } else if (scale === 'Half Day') {\n            self.config.step = 24 / 2;\n            self.config.column_width = 38;\n        } else if (scale === 'Quarter Day') {\n            self.config.step = 24 / 4;\n            self.config.column_width = 38;\n        } else if (scale === 'Week') {\n            self.config.step = 24 * 7;\n            self.config.column_width = 140;\n        } else if (scale === 'Month') {\n            self.config.step = 24 * 30;\n            self.config.column_width = 120;\n        }\n    }\n\n    function set_width() {\n        const cur_width = self.canvas.node.getBoundingClientRect().width;\n        const actual_width = self.canvas.select('#grid .grid-row').attr('width');\n        if (cur_width < actual_width) {\n            self.canvas.attr('width', actual_width);\n        }\n    }\n\n    function set_scroll_position() {\n        const parent_element = document.querySelector(self.element).parentElement;\n        if (!parent_element) return;\n\n        const scroll_pos = get_min_date().diff(self.gantt_start, 'hours') /\n            self.config.step * self.config.column_width - self.config.column_width;\n        parent_element.scrollLeft = scroll_pos;\n    }\n\n    function get_min_date() {\n        const task = self.tasks.reduce((acc, curr) => {\n            return curr._start.isSameOrBefore(acc._start) ? curr : acc;\n        });\n        return task._start;\n    }\n\n    function make_grid() {\n        make_grid_background();\n        make_grid_rows();\n        make_grid_header();\n        make_grid_ticks();\n        make_grid_highlights();\n    }\n\n    function make_grid_background() {\n\n        const grid_width = self.dates.length * self.config.column_width,\n            grid_height = self.config.header_height + self.config.padding +\n                (self.config.bar.height + self.config.padding) * self.tasks.length;\n\n        self.canvas.rect(0, 0, grid_width, grid_height)\n            .addClass('grid-background')\n            .appendTo(self.element_groups.grid);\n\n        self.canvas.attr({\n            height: grid_height + self.config.padding,\n            width: '100%'\n        });\n    }\n\n    function make_grid_header() {\n        const header_width = self.dates.length * self.config.column_width,\n            header_height = self.config.header_height + 10;\n        self.canvas.rect(0, 0, header_width, header_height)\n            .addClass('grid-header')\n            .appendTo(self.element_groups.grid);\n    }\n\n    function make_grid_rows() {\n\n        const rows = self.canvas.group().appendTo(self.element_groups.grid),\n            lines = self.canvas.group().appendTo(self.element_groups.grid),\n            list = self.lhsList.group().appendTo(self.listGroups.listGroup),\n            row_width = self.dates.length * self.config.column_width,\n            row_height = self.config.bar.height + self.config.padding;\n\n        let row_y = self.config.header_height + self.config.padding / 2;\n\n        for (let task of self.tasks) { // eslint-disable-line\n\n            self.canvas.rect(0, row_y, row_width, row_height)\n                .addClass('grid-row')\n                .appendTo(rows);\n\n            self.canvas.line(0, row_y + row_height, row_width, row_y + row_height)\n                .addClass('row-line')\n                .appendTo(lines);\n\n            self.canvas.text(task.isParent ? 5 : 25, row_y + row_height / 2, task.name)\n                .addClass(task.isParent ? 'parent-node-text' : 'child-node-text')\n                .appendTo(list);\n\n            row_y += self.config.bar.height + self.config.padding;\n        }\n    }\n\n    function make_grid_ticks() {\n        let tick_x = 0,\n            tick_y = self.config.header_height + self.config.padding / 2,\n            tick_height = (self.config.bar.height + self.config.padding) * self.tasks.length;\n\n        for (let date of self.dates) {\n            let tick_class = 'tick';\n            // thick tick for monday\n            if (view_is('Day') && date.day() === 1) {\n                tick_class += ' thick';\n            }\n            // thick tick for first week\n            if (view_is('Week') && date.date() >= 1 && date.date() < 8) {\n                tick_class += ' thick';\n            }\n            // thick ticks for quarters\n            if (view_is('Month') && date.month() % 3 === 0) {\n                tick_class += ' thick';\n            }\n\n            self.canvas.path(Snap.format('M {x} {y} v {height}', {\n                x: tick_x,\n                y: tick_y,\n                height: tick_height\n            }))\n                .addClass(tick_class)\n                .appendTo(self.element_groups.grid);\n\n            if (view_is('Month')) {\n                tick_x += date.daysInMonth() * self.config.column_width / 30;\n            } else {\n                tick_x += self.config.column_width;\n            }\n        }\n    }\n\n    function make_grid_highlights() {\n\n        // highlight today's date\n        if (view_is('Day')) {\n            const x = moment().startOf('day').diff(self.gantt_start, 'hours') /\n                self.config.step * self.config.column_width;\n            const y = 0;\n            const width = self.config.column_width;\n            const height = (self.config.bar.height + self.config.padding) * self.tasks.length +\n                self.config.header_height + self.config.padding / 2;\n\n            self.canvas.rect(x, y, width, height)\n                .addClass('today-highlight')\n                .appendTo(self.element_groups.grid);\n        }\n    }\n\n    function make_dates() {\n\n        for (let date of get_dates_to_draw()) {\n            self.canvas.text(date.lower_x, date.lower_y, date.lower_text)\n                .addClass('lower-text')\n                .appendTo(self.element_groups.date);\n\n            if (date.upper_text) {\n                const $upper_text = self.canvas.text(date.upper_x, date.upper_y, date.upper_text)\n                    .addClass('upper-text')\n                    .appendTo(self.element_groups.date);\n\n                // remove out-of-bound dates\n                if ($upper_text.getBBox().x2 > self.element_groups.grid.getBBox().width) {\n                    $upper_text.remove();\n                }\n            }\n        }\n    }\n\n    function get_dates_to_draw() {\n        let last_date = null;\n        const dates = self.dates.map((date, i) => {\n            const d = get_date_info(date, last_date, i);\n            last_date = date;\n            return d;\n        });\n        return dates;\n    }\n\n    function get_date_info(date, last_date, i) {\n        if (!last_date) {\n            last_date = date.clone().add(1, 'year');\n        }\n        const date_text = {\n            'Quarter Day_lower': date.format('HH'),\n            'Half Day_lower': date.format('HH'),\n            'Day_lower': date.date() !== last_date.date() ? date.format('D') : '',\n            'Week_lower': date.month() !== last_date.month() ?\n                date.format('D MMM') : date.format('D'),\n            'Month_lower': date.format('MMMM'),\n            'Quarter Day_upper': date.date() !== last_date.date() ? date.format('D MMM') : '',\n            'Half Day_upper': date.date() !== last_date.date() ?\n                date.month() !== last_date.month() ?\n                    date.format('D MMM') : date.format('D') : '',\n            'Day_upper': date.month() !== last_date.month() ? date.format('MMMM') : '',\n            'Week_upper': date.month() !== last_date.month() ? date.format('MMMM') : '',\n            'Month_upper': date.year() !== last_date.year() ? date.format('YYYY') : ''\n        };\n\n        const base_pos = {\n            x: i * self.config.column_width,\n            lower_y: self.config.header_height,\n            upper_y: self.config.header_height - 25\n        };\n\n        const x_pos = {\n            'Quarter Day_lower': (self.config.column_width * 4) / 2,\n            'Quarter Day_upper': 0,\n            'Half Day_lower': (self.config.column_width * 2) / 2,\n            'Half Day_upper': 0,\n            'Day_lower': self.config.column_width / 2,\n            'Day_upper': (self.config.column_width * 30) / 2,\n            'Week_lower': 0,\n            'Week_upper': (self.config.column_width * 4) / 2,\n            'Month_lower': self.config.column_width / 2,\n            'Month_upper': (self.config.column_width * 12) / 2\n        };\n\n        return {\n            upper_text: date_text[`${self.config.view_mode}_upper`],\n            lower_text: date_text[`${self.config.view_mode}_lower`],\n            upper_x: base_pos.x + x_pos[`${self.config.view_mode}_upper`],\n            upper_y: base_pos.upper_y,\n            lower_x: base_pos.x + x_pos[`${self.config.view_mode}_lower`],\n            lower_y: base_pos.lower_y\n        };\n    }\n\n    function make_arrows() {\n        self._arrows = [];\n        for (let task of self.tasks) {\n            let arrows = [];\n            arrows = task.dependencies.map(dep => {\n                const dependency = get_task(dep);\n                if (!dependency) return;\n\n                const arrow = Arrow(\n                    self, // gt\n                    self._bars[dependency._index], // from_task\n                    self._bars[task._index] // to_task\n                );\n                self.element_groups.arrow.add(arrow.element);\n                return arrow; // eslint-disable-line\n            });\n            self._arrows = self._arrows.concat(arrows);\n        }\n    }\n\n    function make_bars() {\n\n        self._bars = self.tasks.map((task) => {\n            const bar = Bar(self, task);\n            self.element_groups.bar.add(bar.group);\n            return bar;\n        });\n    }\n\n    function map_arrows_on_bars() {\n        for (let bar of self._bars) {\n            bar.arrows = self._arrows.filter(arrow => {\n                return (arrow.from_task.task.id === bar.task.id) ||\n                    (arrow.to_task.task.id === bar.task.id);\n            });\n        }\n    }\n\n    function bind_grid_click() {\n        self.element_groups.grid.click(() => {\n            unselect_all();\n            self.element_groups.details\n                .selectAll('.details-wrapper')\n                .forEach(el => el.addClass('hide'));\n        });\n    }\n\n    function unselect_all() {\n        self.canvas.selectAll('.bar-wrapper').forEach(el => {\n            el.removeClass('active');\n        });\n    }\n\n    function view_is(modes) {\n        if (typeof modes === 'string') {\n            return self.config.view_mode === modes;\n        } else if (Array.isArray(modes)) {\n            for (let mode of modes) {\n                if (self.config.view_mode === mode) return true;\n            }\n            return false;\n        }\n    }\n\n    function get_task(id) {\n        return self.tasks.find((task) => {\n            return task.id === id;\n        });\n    }\n\n    function get_bar(id) {\n        return self._bars.find((bar) => {\n            return bar.task.id === id;\n        });\n    }\n\n    function generate_id(task) {\n        return task.name + '_' + Math.random().toString(36).slice(2, 12);\n    }\n\n    function trigger_event(event, args) {\n        if (self.config['on_' + event]) {\n            self.config['on_' + event].apply(null, args);\n        }\n    }\n\n    init();\n\n    return self;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/eslint-loader!./src/Gantt.js\n **/","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../node_modules/css-loader/index.js?sourceMap!../node_modules/sass-loader/index.js?sourceMap!./gantt.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../node_modules/css-loader/index.js?sourceMap!../node_modules/sass-loader/index.js?sourceMap!./gantt.scss\", function() {\n\t\t\tvar newContent = require(\"!!../node_modules/css-loader/index.js?sourceMap!../node_modules/sass-loader/index.js?sourceMap!./gantt.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/gantt.scss\n ** module id = 1\n ** module chunks = 0\n **/","exports = module.exports = require(\"../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \".gantt .grid-background {\\n  fill: none; }\\n\\n.gantt .grid-header {\\n  fill: #ffffff;\\n  stroke: #e0e0e0;\\n  stroke-width: 1.4; }\\n\\n.gantt .grid-row {\\n  fill: #ffffff; }\\n\\n.gantt .grid-row:nth-child(even) {\\n  fill: #f5f5f5; }\\n\\n.gantt .row-line {\\n  stroke: #ebeff2; }\\n\\n.gantt .tick {\\n  stroke: #e0e0e0;\\n  stroke-width: 0.2; }\\n  .gantt .tick.thick {\\n    stroke-width: 0.4; }\\n\\n.gantt .today-highlight {\\n  fill: #fcf8e3;\\n  opacity: 0.5; }\\n\\n.gantt #arrow {\\n  fill: none;\\n  stroke: #666;\\n  stroke-width: 1.4; }\\n\\n.gantt .bar {\\n  fill: #b8c2cc;\\n  stroke: #8D99A6;\\n  stroke-width: 0;\\n  transition: stroke-width .3s ease; }\\n\\n.gantt .bar-progress {\\n  fill: #a3a3ff; }\\n\\n.gantt .bar-invalid {\\n  fill: transparent;\\n  stroke: #8D99A6;\\n  stroke-width: 1;\\n  stroke-dasharray: 5; }\\n  .gantt .bar-invalid ~ .bar-label {\\n    fill: #555; }\\n\\n.gantt .bar-label {\\n  fill: #fff;\\n  dominant-baseline: central;\\n  text-anchor: middle;\\n  font-size: 12px;\\n  font-weight: lighter;\\n  letter-spacing: 0.8px; }\\n  .gantt .bar-label.big {\\n    fill: #555;\\n    text-anchor: start; }\\n\\n.gantt .handle {\\n  fill: #ddd;\\n  cursor: ew-resize;\\n  opacity: 0;\\n  visibility: hidden;\\n  transition: opacity .3s ease; }\\n\\n.gantt .bar-wrapper {\\n  cursor: pointer; }\\n  .gantt .bar-wrapper:hover .bar {\\n    stroke-width: 2; }\\n  .gantt .bar-wrapper:hover .handle {\\n    visibility: visible;\\n    opacity: 1; }\\n  .gantt .bar-wrapper.active .bar {\\n    stroke-width: 2; }\\n\\n.gantt .lower-text, .gantt .upper-text {\\n  font-size: 12px;\\n  text-anchor: middle; }\\n\\n.gantt .upper-text {\\n  fill: #555; }\\n\\n.gantt .lower-text {\\n  fill: #333; }\\n\\n.gantt #details .details-container {\\n  background: #fff;\\n  display: inline-block;\\n  padding: 12px; }\\n  .gantt #details .details-container h5, .gantt #details .details-container p {\\n    margin: 0; }\\n  .gantt #details .details-container h5 {\\n    font-size: 12px;\\n    font-weight: bold;\\n    margin-bottom: 10px;\\n    color: #555; }\\n  .gantt #details .details-container p {\\n    font-size: 12px;\\n    margin-bottom: 6px;\\n    color: #666; }\\n  .gantt #details .details-container p:last-child {\\n    margin-bottom: 0; }\\n\\n.gantt .hide {\\n  display: none; }\\n\", \"\", {\"version\":3,\"sources\":[\"/home/heidar/projects/gantt-fork/src/src/gantt.scss\"],\"names\":[],\"mappings\":\"AAYA;EAGE,WAAU,EACV;;AAJF;EAME,cAAa;EACb,gBAjBoB;EAkBpB,kBAAiB,EACjB;;AATF;EAWE,cAAa,EACb;;AAZF;EAcE,cAvBgB,EAwBhB;;AAfF;EAiBE,gBAzB0B,EA0B1B;;AAlBF;EAoBE,gBA9BoB;EA+BpB,kBAAiB,EAIjB;EAzBF;IAuBG,kBAAiB,EACjB;;AAxBH;EA2BE,cAlCoB;EAmCpB,aAAY,EACZ;;AA7BF;EAgCE,WAAU;EACV,aAvCe;EAwCf,kBAAiB,EACjB;;AAnCF;EAsCE,cAlDiB;EAmDjB,gBAlDkB;EAmDlB,gBAAe;EACf,kCAAiC,EACjC;;AA1CF;EA4CE,cA/CY,EAgDZ;;AA7CF;EA+CE,kBAAiB;EACjB,gBA3DkB;EA4DlB,gBAAe;EACf,oBAAmB,EAKnB;EAvDF;IAqDG,WA1Dc,EA2Dd;;AAtDH;EAyDE,WAAU;EACV,2BAA0B;EAC1B,oBAAmB;EACnB,gBAAe;EACf,qBAAoB;EACpB,sBAAqB,EAMrB;EApEF;IAiEG,WAtEc;IAuEd,mBAAkB,EAClB;;AAnEH;EAuEE,WAzEiB;EA0EjB,kBAAiB;EACjB,WAAU;EACV,mBAAkB;EAClB,6BAA4B,EAC5B;;AA5EF;EA+EE,gBAAe,EAkBf;EAjGF;IAmFI,gBAAe,EACf;EApFJ;IAuFI,oBAAmB;IACnB,WAAU,EACV;EAzFJ;IA8FI,gBAAe,EACf;;AA/FJ;EAoGE,gBAAe;EACf,oBAAmB,EACnB;;AAtGF;EAwGE,WA7Ge,EA8Gf;;AAzGF;EA2GE,WA/Ge,EAgHf;;AA5GF;EA+GE,iBAAgB;EAChB,sBAAqB;EACrB,cAAa,EAsBb;EAvIF;IAoHG,UAAS,EACT;EArHH;IAwHG,gBAAe;IACf,kBAAiB;IACjB,oBAAmB;IACnB,YAhIc,EAiId;EA5HH;IA+HG,gBAAe;IACf,mBAAkB;IAClB,YAvIc,EAwId;EAlIH;IAqIG,iBAAgB,EAChB;;AAtIH;EA0IE,cAAa,EACb\",\"file\":\"gantt.scss\",\"sourcesContent\":[\"$bar-color: #b8c2cc;\\n$bar-stroke: #8D99A6;\\n$border-color: #e0e0e0;\\n$light-bg: #f5f5f5;\\n$light-border-color: #ebeff2;\\n$light-yellow: #fcf8e3;\\n$text-muted: #666;\\n$text-light: #555;\\n$text-color: #333;\\n$blue: #a3a3ff;\\n$handle-color: #ddd;\\n\\n.gantt {\\n\\n\\t.grid-background {\\n\\t\\tfill: none;\\n\\t}\\n\\t.grid-header {\\n\\t\\tfill: #ffffff;\\n\\t\\tstroke: $border-color;\\n\\t\\tstroke-width: 1.4;\\n\\t}\\n\\t.grid-row {\\n\\t\\tfill: #ffffff;\\n\\t}\\n\\t.grid-row:nth-child(even) {\\n\\t\\tfill: $light-bg;\\n\\t}\\n\\t.row-line {\\n\\t\\tstroke: $light-border-color;\\n\\t}\\n\\t.tick {\\n\\t\\tstroke: $border-color;\\n\\t\\tstroke-width: 0.2;\\n\\t\\t&.thick {\\n\\t\\t\\tstroke-width: 0.4;\\n\\t\\t}\\n\\t}\\n\\t.today-highlight {\\n\\t\\tfill: $light-yellow;\\n\\t\\topacity: 0.5;\\n\\t}\\n\\n\\t#arrow {\\n\\t\\tfill: none;\\n\\t\\tstroke: $text-muted;\\n\\t\\tstroke-width: 1.4;\\n\\t}\\n\\n\\t.bar {\\n\\t\\tfill: $bar-color;\\n\\t\\tstroke: $bar-stroke;\\n\\t\\tstroke-width: 0;\\n\\t\\ttransition: stroke-width .3s ease;\\n\\t}\\n\\t.bar-progress {\\n\\t\\tfill: $blue;\\n\\t}\\n\\t.bar-invalid {\\n\\t\\tfill: transparent;\\n\\t\\tstroke: $bar-stroke;\\n\\t\\tstroke-width: 1;\\n\\t\\tstroke-dasharray: 5;\\n\\n\\t\\t&~.bar-label {\\n\\t\\t\\tfill: $text-light;\\n\\t\\t}\\n\\t}\\n\\t.bar-label {\\n\\t\\tfill: #fff;\\n\\t\\tdominant-baseline: central;\\n\\t\\ttext-anchor: middle;\\n\\t\\tfont-size: 12px;\\n\\t\\tfont-weight: lighter;\\n\\t\\tletter-spacing: 0.8px;\\n\\n\\t\\t&.big {\\n\\t\\t\\tfill: $text-light;\\n\\t\\t\\ttext-anchor: start;\\n\\t\\t}\\n\\t}\\n\\n\\t.handle {\\n\\t\\tfill: $handle-color;\\n\\t\\tcursor: ew-resize;\\n\\t\\topacity: 0;\\n\\t\\tvisibility: hidden;\\n\\t\\ttransition: opacity .3s ease;\\n\\t}\\n\\n\\t.bar-wrapper {\\n\\t\\tcursor: pointer;\\n\\n\\t\\t&:hover {\\n\\t\\t\\t.bar {\\n\\t\\t\\t\\tstroke-width: 2;\\n\\t\\t\\t}\\n\\n\\t\\t\\t.handle {\\n\\t\\t\\t\\tvisibility: visible;\\n\\t\\t\\t\\topacity: 1;\\n\\t\\t\\t}\\n\\t\\t}\\n\\n\\t\\t&.active {\\n\\t\\t\\t.bar {\\n\\t\\t\\t\\tstroke-width: 2;\\n\\t\\t\\t}\\n\\t\\t}\\n\\t}\\n\\n\\t.lower-text, .upper-text {\\n\\t\\tfont-size: 12px;\\n\\t\\ttext-anchor: middle;\\n\\t}\\n\\t.upper-text {\\n\\t\\tfill: $text-light;\\n\\t}\\n\\t.lower-text {\\n\\t\\tfill: $text-color;\\n\\t}\\n\\n\\t#details .details-container {\\n\\t\\tbackground: #fff;\\n\\t\\tdisplay: inline-block;\\n\\t\\tpadding: 12px;\\n\\n\\t\\th5, p {\\n\\t\\t\\tmargin: 0;\\n\\t\\t}\\n\\n\\t\\th5 {\\n\\t\\t\\tfont-size: 12px;\\n\\t\\t\\tfont-weight: bold;\\n\\t\\t\\tmargin-bottom: 10px;\\n\\t\\t\\tcolor: $text-light;\\n\\t\\t}\\n\\n\\t\\tp {\\n\\t\\t\\tfont-size: 12px;\\n\\t\\t\\tmargin-bottom: 6px;\\n\\t\\t\\tcolor: $text-muted;\\n\\t\\t}\\n\\n\\t\\tp:last-child {\\n\\t\\t\\tmargin-bottom: 0;\\n\\t\\t}\\n\\t}\\n\\n\\t.hide {\\n\\t\\tdisplay: none;\\n\\t}\\n}\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/css-loader?sourceMap!./~/sass-loader?sourceMap!./src/gantt.scss\n ** module id = 2\n ** module chunks = 0\n **/","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function() {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\tvar result = [];\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar item = this[i];\n\t\t\tif(item[2]) {\n\t\t\t\tresult.push(\"@media \" + item[2] + \"{\" + item[1] + \"}\");\n\t\t\t} else {\n\t\t\t\tresult.push(item[1]);\n\t\t\t}\n\t\t}\n\t\treturn result.join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/css-loader/lib/css-base.js\n ** module id = 3\n ** module chunks = 0\n **/","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\nvar stylesInDom = {},\n\tmemoize = function(fn) {\n\t\tvar memo;\n\t\treturn function () {\n\t\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\t\treturn memo;\n\t\t};\n\t},\n\tisOldIE = memoize(function() {\n\t\treturn /msie [6-9]\\b/.test(self.navigator.userAgent.toLowerCase());\n\t}),\n\tgetHeadElement = memoize(function () {\n\t\treturn document.head || document.getElementsByTagName(\"head\")[0];\n\t}),\n\tsingletonElement = null,\n\tsingletonCounter = 0,\n\tstyleElementsInsertedAtTop = [];\n\nmodule.exports = function(list, options) {\n\tif(typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif(typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (typeof options.singleton === \"undefined\") options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the bottom of <head>.\n\tif (typeof options.insertAt === \"undefined\") options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list);\n\taddStylesToDom(styles, options);\n\n\treturn function update(newList) {\n\t\tvar mayRemove = [];\n\t\tfor(var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\t\tfor(var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor(var j = 0; j < domStyle.parts.length; j++)\n\t\t\t\t\tdomStyle.parts[j]();\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n}\n\nfunction addStylesToDom(styles, options) {\n\tfor(var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles(list) {\n\tvar styles = [];\n\tvar newStyles = {};\n\tfor(var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\t\tif(!newStyles[id])\n\t\t\tstyles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse\n\t\t\tnewStyles[id].parts.push(part);\n\t}\n\treturn styles;\n}\n\nfunction insertStyleElement(options, styleElement) {\n\tvar head = getHeadElement();\n\tvar lastStyleElementInsertedAtTop = styleElementsInsertedAtTop[styleElementsInsertedAtTop.length - 1];\n\tif (options.insertAt === \"top\") {\n\t\tif(!lastStyleElementInsertedAtTop) {\n\t\t\thead.insertBefore(styleElement, head.firstChild);\n\t\t} else if(lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\thead.insertBefore(styleElement, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\thead.appendChild(styleElement);\n\t\t}\n\t\tstyleElementsInsertedAtTop.push(styleElement);\n\t} else if (options.insertAt === \"bottom\") {\n\t\thead.appendChild(styleElement);\n\t} else {\n\t\tthrow new Error(\"Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.\");\n\t}\n}\n\nfunction removeStyleElement(styleElement) {\n\tstyleElement.parentNode.removeChild(styleElement);\n\tvar idx = styleElementsInsertedAtTop.indexOf(styleElement);\n\tif(idx >= 0) {\n\t\tstyleElementsInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement(options) {\n\tvar styleElement = document.createElement(\"style\");\n\tstyleElement.type = \"text/css\";\n\tinsertStyleElement(options, styleElement);\n\treturn styleElement;\n}\n\nfunction createLinkElement(options) {\n\tvar linkElement = document.createElement(\"link\");\n\tlinkElement.rel = \"stylesheet\";\n\tinsertStyleElement(options, linkElement);\n\treturn linkElement;\n}\n\nfunction addStyle(obj, options) {\n\tvar styleElement, update, remove;\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\t\tstyleElement = singletonElement || (singletonElement = createStyleElement(options));\n\t\tupdate = applyToSingletonTag.bind(null, styleElement, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, styleElement, styleIndex, true);\n\t} else if(obj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\") {\n\t\tstyleElement = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, styleElement);\n\t\tremove = function() {\n\t\t\tremoveStyleElement(styleElement);\n\t\t\tif(styleElement.href)\n\t\t\t\tURL.revokeObjectURL(styleElement.href);\n\t\t};\n\t} else {\n\t\tstyleElement = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, styleElement);\n\t\tremove = function() {\n\t\t\tremoveStyleElement(styleElement);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle(newObj) {\n\t\tif(newObj) {\n\t\t\tif(newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap)\n\t\t\t\treturn;\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag(styleElement, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (styleElement.styleSheet) {\n\t\tstyleElement.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = styleElement.childNodes;\n\t\tif (childNodes[index]) styleElement.removeChild(childNodes[index]);\n\t\tif (childNodes.length) {\n\t\t\tstyleElement.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyleElement.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag(styleElement, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyleElement.setAttribute(\"media\", media)\n\t}\n\n\tif(styleElement.styleSheet) {\n\t\tstyleElement.styleSheet.cssText = css;\n\t} else {\n\t\twhile(styleElement.firstChild) {\n\t\t\tstyleElement.removeChild(styleElement.firstChild);\n\t\t}\n\t\tstyleElement.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink(linkElement, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\tif(sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = linkElement.href;\n\n\tlinkElement.href = URL.createObjectURL(blob);\n\n\tif(oldSrc)\n\t\tURL.revokeObjectURL(oldSrc);\n}\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/style-loader/addStyles.js\n ** module id = 4\n ** module chunks = 0\n **/","/* global Snap */\n/*\n\tClass: Bar\n\n\tOpts:\n\t\tgt: Gantt object\n\t\ttask: task object\n*/\n\nexport default function Bar(gt, task) {\n\n\tconst self = {};\n\tfunction init() {\n\t\tset_defaults();\n\t\tprepare();\n\t\tdraw();\n\t\tbind();\n\t}\n\n\tfunction set_defaults() {\n\t\tself.action_completed = false;\n\t\tself.task = task;\n\t}\n\n\tfunction prepare() {\n\t\tprepare_values();\n\t\tprepare_plugins();\n\t}\n\n\tfunction prepare_values() {\n\t\tself.invalid = self.task.invalid;\n\t\tself.height = gt.config.bar.height;\n\t\tself.x = compute_x();\n\t\tself.y = compute_y();\n\t\tself.corner_radius = 3;\n\t\tself.duration = (self.task._end.diff(self.task._start, 'hours') + 24) / gt.config.step;\n\t\tself.width = gt.config.column_width * self.duration;\n\t\tself.progress_width = gt.config.column_width * self.duration * (self.task.progress / 100) || 0;\n\t\tself.group = gt.canvas.group().addClass('bar-wrapper').addClass(self.task.custom_class || '');\n\t\tself.bar_group = gt.canvas.group().addClass('bar-group').appendTo(self.group);\n\t\tself.handle_group = gt.canvas.group().addClass('handle-group').appendTo(self.group);\n\t}\n\n\tfunction prepare_plugins() {\n\t\tSnap.plugin(function (Snap, Element, Paper, global, Fragment) {\n\t\t\tElement.prototype.getX = function () {\n\t\t\t\treturn +this.attr('x');\n\t\t\t};\n\t\t\tElement.prototype.getY = function () {\n\t\t\t\treturn +this.attr('y');\n\t\t\t};\n\t\t\tElement.prototype.getWidth = function () {\n\t\t\t\treturn +this.attr('width');\n\t\t\t};\n\t\t\tElement.prototype.getHeight = function () {\n\t\t\t\treturn +this.attr('height');\n\t\t\t};\n\t\t\tElement.prototype.getEndX = function () {\n\t\t\t\treturn this.getX() + this.getWidth();\n\t\t\t};\n\t\t});\n\t}\n\n\tfunction draw() {\n\t\tdraw_bar();\n\t\tdraw_progress_bar();\n\t\tdraw_label();\n\t\tdraw_resize_handles();\n\t}\n\n\tfunction draw_bar() {\n\t\tself.$bar = gt.canvas.rect(self.x, self.y,\n\t\t\tself.width, self.height,\n\t\t\tself.corner_radius, self.corner_radius)\n\t\t\t.addClass('bar')\n\t\t\t.appendTo(self.bar_group);\n\t\tif (self.invalid) {\n\t\t\tself.$bar.addClass('bar-invalid');\n\t\t}\n\t}\n\n\tfunction draw_progress_bar() {\n\t\tif (self.invalid) return;\n\t\tself.$bar_progress = gt.canvas.rect(self.x, self.y,\n\t\t\tself.progress_width, self.height,\n\t\t\tself.corner_radius, self.corner_radius)\n\t\t\t.addClass('bar-progress')\n\t\t\t.appendTo(self.bar_group);\n\t}\n\n\tfunction draw_label() {\n\t\tgt.canvas.text(self.x + self.width / 2,\n\t\t\tself.y + self.height / 2,\n\t\t\tself.task.name)\n\t\t\t.addClass('bar-label')\n\t\t\t.appendTo(self.bar_group);\n\t\tupdate_label_position();\n\t}\n\n\tfunction draw_resize_handles() {\n\t\tif (self.invalid || self.task.isParent) return;\n\n\t\tconst bar = self.$bar,\n\t\t\thandle_width = 8;\n\n\t\tgt.canvas.rect(bar.getX() + bar.getWidth() - 9, bar.getY() + 1,\n\t\t\thandle_width, self.height - 2, self.corner_radius, self.corner_radius)\n\t\t\t.addClass('handle right')\n\t\t\t.appendTo(self.handle_group);\n\t\tgt.canvas.rect(bar.getX() + 1, bar.getY() + 1,\n\t\t\thandle_width, self.height - 2, self.corner_radius, self.corner_radius)\n\t\t\t.addClass('handle left')\n\t\t\t.appendTo(self.handle_group);\n\n\t\tif (self.task.progress && self.task.progress < 100) {\n\t\t\tgt.canvas.polygon(get_progress_polygon_points())\n\t\t\t\t.addClass('handle progress')\n\t\t\t\t.appendTo(self.handle_group);\n\t\t}\n\t}\n\n\tfunction get_progress_polygon_points() {\n\t\tconst bar_progress = self.$bar_progress;\n\t\treturn [\n\t\t\tbar_progress.getEndX() - 5, bar_progress.getY() + bar_progress.getHeight(),\n\t\t\tbar_progress.getEndX() + 5, bar_progress.getY() + bar_progress.getHeight(),\n\t\t\tbar_progress.getEndX(), bar_progress.getY() + bar_progress.getHeight() - 8.66\n\t\t];\n\t}\n\n\tfunction bind() {\n\t\tif (self.invalid || self.task.isParent) return;\n\t\tsetup_click_event();\n\t\tshow_details();\n\t\tbind_resize();\n\t\tbind_drag();\n\t\tbind_resize_progress();\n\t}\n\n\tfunction show_details() {\n\t\tconst popover_group = gt.element_groups.details;\n\t\tself.details_box = popover_group\n\t\t\t.select(`.details-wrapper[data-task='${self.task.id}']`);\n\n\t\tif (!self.details_box) {\n\t\t\tself.details_box = gt.canvas.group()\n\t\t\t\t.addClass('details-wrapper hide')\n\t\t\t\t.attr('data-task', self.task.id)\n\t\t\t\t.appendTo(popover_group);\n\n\t\t\trender_details();\n\n\t\t\tconst f = gt.canvas.filter(\n\t\t\t\tSnap.filter.shadow(0, 1, 1, '#666', 0.6));\n\t\t\tself.details_box.attr({\n\t\t\t\tfilter: f\n\t\t\t});\n\t\t}\n\n\t\tself.group.click((e) => {\n\t\t\tif (self.action_completed) {\n\t\t\t\t// just finished a move action, wait for a few seconds\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tpopover_group.selectAll('.details-wrapper')\n\t\t\t\t.forEach(el => el.addClass('hide'));\n\t\t\tself.details_box.removeClass('hide');\n\t\t});\n\t}\n\n\tfunction render_details() {\n\t\tconst {x, y} = get_details_position();\n\t\tself.details_box.transform(`t${x},${y}`);\n\t\tself.details_box.clear();\n\n\t\tconst html = get_details_html();\n\t\tconst foreign_object =\n\t\t\tSnap.parse(`<foreignObject width=\"5000\" height=\"2000\">\n\t\t\t\t<body xmlns=\"http://www.w3.org/1999/xhtml\">\n\t\t\t\t\t${html}\n\t\t\t\t</body>\n\t\t\t\t</foreignObject>`);\n\t\tself.details_box.append(foreign_object);\n\t}\n\n\tfunction get_details_html() {\n\n\t\t// custom html in config\n\t\tif(gt.config.custom_popup_html) {\n\t\t\tconst html = gt.config.custom_popup_html;\n\t\t\tif(typeof html === 'string') {\n\t\t\t\treturn html;\n\t\t\t}\n\t\t\tif(isFunction(html)) {\n\t\t\t\treturn html(task);\n\t\t\t}\n\t\t}\n\n\t\tconst start_date = self.task._start.format('MMM D');\n\t\tconst end_date = self.task._end.format('MMM D');\n\t\tconst heading = `${self.task.name}: ${start_date} - ${end_date}`;\n\n\t\tconst line_1 = `Duration: ${self.duration} days`;\n\t\tconst line_2 = self.task.progress ? `Progress: ${self.task.progress}` : null;\n\n\t\tconst html = `\n\t\t\t<div class=\"details-container\">\n\t\t\t\t<h5>${heading}</h5>\n\t\t\t\t<p>${line_1}</p>\n\t\t\t\t${\n\t\t\t\t\tline_2 ? `<p>${line_2}</p>` : ''\n\t\t\t\t}\n\t\t\t</div>\n\t\t`;\n\t\treturn html;\n\t}\n\n\tfunction get_details_position() {\n\t\treturn {\n\t\t\tx: self.$bar.getEndX() + 2,\n\t\t\ty: self.$bar.getY() - 10\n\t\t};\n\t}\n\n\tfunction bind_resize() {\n\t\tconst { left, right } = get_handles();\n\n\t\tleft.drag(onmove_left, onstart, onstop_left);\n\t\tright.drag(onmove_right, onstart, onstop_right);\n\n\t\tfunction onmove_right(dx, dy) {\n\t\t\tonmove_handle_right(dx, dy);\n\t\t}\n\t\tfunction onstop_right() {\n\t\t\tonstop_handle_right();\n\t\t}\n\n\t\tfunction onmove_left(dx, dy) {\n\t\t\tonmove_handle_left(dx, dy);\n\t\t}\n\t\tfunction onstop_left() {\n\t\t\tonstop_handle_left();\n\t\t}\n\t}\n\n\tfunction get_handles() {\n\t\treturn {\n\t\t\tleft: self.handle_group.select('.handle.left'),\n\t\t\tright: self.handle_group.select('.handle.right')\n\t\t};\n\t}\n\n\tfunction bind_drag() {\n\t\tself.bar_group.drag(onmove, onstart, onstop);\n\t}\n\n\tfunction bind_resize_progress() {\n\t\tconst bar = self.$bar,\n\t\t\tbar_progress = self.$bar_progress,\n\t\t\thandle = self.group.select('.handle.progress');\n\t\thandle && handle.drag(on_move, on_start, on_stop);\n\n\t\tfunction on_move(dx, dy) {\n\t\t\tif (dx > bar_progress.max_dx) {\n\t\t\t\tdx = bar_progress.max_dx;\n\t\t\t}\n\t\t\tif (dx < bar_progress.min_dx) {\n\t\t\t\tdx = bar_progress.min_dx;\n\t\t\t}\n\n\t\t\tbar_progress.attr('width', bar_progress.owidth + dx);\n\t\t\thandle.attr('points', get_progress_polygon_points());\n\t\t\tbar_progress.finaldx = dx;\n\t\t}\n\t\tfunction on_stop() {\n\t\t\tif (!bar_progress.finaldx) return;\n\t\t\tprogress_changed();\n\t\t\tset_action_completed();\n\t\t}\n\t\tfunction on_start() {\n\t\t\tbar_progress.finaldx = 0;\n\t\t\tbar_progress.owidth = bar_progress.getWidth();\n\t\t\tbar_progress.min_dx = -bar_progress.getWidth();\n\t\t\tbar_progress.max_dx = bar.getWidth() - bar_progress.getWidth();\n\t\t}\n\t}\n\n\tfunction onstart() {\n\t\tconst bar = self.$bar;\n\t\tbar.ox = bar.getX();\n\t\tbar.oy = bar.getY();\n\t\tbar.owidth = bar.getWidth();\n\t\tbar.finaldx = 0;\n\t\trun_method_for_dependencies('onstart');\n\t}\n\tself.onstart = onstart;\n\n\tfunction onmove(dx, dy) {\n\t\tconst bar = self.$bar;\n\t\tbar.finaldx = get_snap_position(dx);\n\t\tupdate_bar_position({x: bar.ox + bar.finaldx});\n\t\trun_method_for_dependencies('onmove', [dx, dy]);\n\t}\n\tself.onmove = onmove;\n\n\tfunction onstop() {\n\t\tconst bar = self.$bar;\n\t\tif (!bar.finaldx) return;\n\t\tdate_changed();\n\t\tset_action_completed();\n\t\trun_method_for_dependencies('onstop');\n\t}\n\tself.onstop = onstop;\n\n\tfunction onmove_handle_left(dx, dy) {\n\t\tconst bar = self.$bar;\n\t\tbar.finaldx = get_snap_position(dx);\n\t\tupdate_bar_position({\n\t\t\tx: bar.ox + bar.finaldx,\n\t\t\twidth: bar.owidth - bar.finaldx\n\t\t});\n\t\trun_method_for_dependencies('onmove', [dx, dy]);\n\t}\n\tself.onmove_handle_left = onmove_handle_left;\n\n\tfunction onstop_handle_left() {\n\t\tconst bar = self.$bar;\n\t\tif (bar.finaldx) date_changed();\n\t\tset_action_completed();\n\t\trun_method_for_dependencies('onstop');\n\t\twindow.gantt_chart.refresh();\n\t}\n\tself.onstop_handle_left = onstop_handle_left;\n\n\tfunction run_method_for_dependencies(fn, args) {\n\t\tconst dm = gt.dependency_map;\n\t\tif (dm[self.task.id]) {\n\t\t\tfor (let deptask of dm[self.task.id]) {\n\t\t\t\tconst dt = gt.get_bar(deptask);\n\t\t\t\tdt[fn].apply(dt, args);\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction onmove_handle_right(dx, dy) {\n\t\tconst bar = self.$bar;\n\t\tbar.finaldx = get_snap_position(dx);\n\t\tupdate_bar_position({width: bar.owidth + bar.finaldx});\n\t}\n\n\tfunction onstop_handle_right() {\n\t\tconst bar = self.$bar;\n\t\tif (bar.finaldx) date_changed();\n\t\tset_action_completed();\n\t\twindow.gantt_chart.refresh();\n\t}\n\n\tfunction update_bar_position({x = null, width = null}) {\n\t\tconst bar = self.$bar;\n\t\tif (x) {\n\t\t\t// get all x values of parent task\n\t\t\tconst xs = task.dependencies.map(dep => {\n\t\t\t\treturn gt.get_bar(dep).$bar.getX();\n\t\t\t});\n\t\t\t// child task must not go before parent\n\t\t\tconst valid_x = xs.reduce((prev, curr) => {\n\t\t\t\treturn x >= curr;\n\t\t\t}, x);\n\t\t\tif(!valid_x) {\n\t\t\t\twidth = null;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tupdate_attr(bar, 'x', x);\n\t\t}\n\t\tif (width && width >= gt.config.column_width) {\n\t\t\tupdate_attr(bar, 'width', width);\n\t\t}\n\t\tupdate_label_position();\n\t\tupdate_handle_position();\n\t\tupdate_progressbar_position();\n\t\tupdate_arrow_position();\n\t\tupdate_details_position();\n\t}\n\n\tfunction setup_click_event() {\n\t\tself.group.click(function () {\n\t\t\tif (self.action_completed) {\n\t\t\t\t// just finished a move action, wait for a few seconds\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (self.group.hasClass('active')) {\n\t\t\t\tgt.trigger_event('click', [self.task]);\n\t\t\t}\n\t\t\tgt.unselect_all();\n\t\t\tself.group.toggleClass('active');\n\t\t});\n\t}\n\n\tfunction date_changed() {\n\t\tconst { new_start_date, new_end_date } = compute_start_end_date();\n\t\tself.task._start = new_start_date;\n\t\tself.task._end = new_end_date;\n\t\tself.task.start = new Date(new_start_date._d);\n\t\tself.task.end = new Date(new_end_date._d);\n\t\trender_details();\n\t\tgt.trigger_event('date_change',\n\t\t\t[self.task, new_start_date, new_end_date]);\n\t}\n\n\tfunction progress_changed() {\n\t\tconst new_progress = compute_progress();\n\t\tself.task.progress = new_progress;\n\t\trender_details();\n\t\tgt.trigger_event('progress_change',\n\t\t\t[self.task, new_progress]);\n\t}\n\n\tfunction set_action_completed() {\n\t\tself.action_completed = true;\n\t\tsetTimeout(() => self.action_completed = false, 2000);\n\t}\n\n\tfunction compute_start_end_date() {\n\t\tconst bar = self.$bar;\n\t\tconst x_in_units = bar.getX() / gt.config.column_width;\n\t\tconst new_start_date = gt.gantt_start.clone().add(x_in_units * gt.config.step, 'hours');\n\t\tconst width_in_units = bar.getWidth() / gt.config.column_width;\n\t\tconst new_end_date = new_start_date.clone().add(width_in_units * gt.config.step, 'hours');\n\t\treturn { new_start_date, new_end_date };\n\t}\n\n\tfunction compute_progress() {\n\t\tconst progress = self.$bar_progress.getWidth() / self.$bar.getWidth() * 100;\n\t\treturn parseInt(progress, 10);\n\t}\n\n\tfunction compute_x() {\n\t\tlet x = self.task._start.diff(gt.gantt_start, 'hours') /\n\t\t\tgt.config.step * gt.config.column_width;\n\n\t\tif (gt.view_is('Month')) {\n\t\t\tx = self.task._start.diff(gt.gantt_start, 'days') *\n\t\t\t\tgt.config.column_width / 30;\n\t\t}\n\t\treturn x;\n\t}\n\n\tfunction compute_y() {\n\t\treturn gt.config.header_height + gt.config.padding +\n\t\t\tself.task._index * (self.height + gt.config.padding);\n\t}\n\n\tfunction get_snap_position(dx) {\n\t\tlet odx = dx, rem, position;\n\n\t\tif (gt.view_is('Week')) {\n\t\t\trem = dx % (gt.config.column_width / 7);\n\t\t\tposition = odx - rem +\n\t\t\t\t((rem < gt.config.column_width / 14) ? 0 : gt.config.column_width / 7);\n\t\t} else if (gt.view_is('Month')) {\n\t\t\trem = dx % (gt.config.column_width / 30);\n\t\t\tposition = odx - rem +\n\t\t\t\t((rem < gt.config.column_width / 60) ? 0 : gt.config.column_width / 30);\n\t\t} else {\n\t\t\trem = dx % gt.config.column_width;\n\t\t\tposition = odx - rem +\n\t\t\t\t((rem < gt.config.column_width / 2) ? 0 : gt.config.column_width);\n\t\t}\n\t\treturn position;\n\t}\n\n\tfunction update_attr(element, attr, value) {\n\t\tvalue = +value;\n\t\tif (!isNaN(value)) {\n\t\t\telement.attr(attr, value);\n\t\t}\n\t\treturn element;\n\t}\n\n\tfunction update_progressbar_position() {\n\t\tself.$bar_progress.attr('x', self.$bar.getX());\n\t\tself.$bar_progress.attr('width', self.$bar.getWidth() * (self.task.progress / 100));\n\t}\n\n\tfunction update_label_position() {\n\t\tconst bar = self.$bar,\n\t\t\tlabel = self.group.select('.bar-label');\n\t\tif (label.getBBox().width > bar.getWidth()) {\n\t\t\tlabel.addClass('big').attr('x', bar.getX() + bar.getWidth() + 5);\n\t\t} else {\n\t\t\tlabel.removeClass('big').attr('x', bar.getX() + bar.getWidth() / 2);\n\t\t}\n\t}\n\n\tfunction update_handle_position() {\n\t\tconst bar = self.$bar;\n\t\tself.handle_group.select('.handle.left').attr({\n\t\t\t'x': bar.getX() + 1\n\t\t});\n\t\tself.handle_group.select('.handle.right').attr({\n\t\t\t'x': bar.getEndX() - 9\n\t\t});\n\t\tconst handle = self.group.select('.handle.progress');\n\t\thandle && handle.attr('points', get_progress_polygon_points());\n\t}\n\n\tfunction update_arrow_position() {\n\t\tfor (let arrow of self.arrows) {\n\t\t\tarrow.update();\n\t\t}\n\t}\n\n\tfunction update_details_position() {\n\t\tconst {x, y} = get_details_position();\n\t\tself.details_box && self.details_box.transform(`t${x},${y}`);\n\t}\n\n\tfunction isFunction(functionToCheck) {\n\t\tvar getType = {};\n\t\treturn functionToCheck && getType.toString.call(functionToCheck) === '[object Function]';\n\t}\n\n\tinit();\n\n\treturn self;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/eslint-loader!./src/Bar.js\n **/","/* global Snap */\n/*\n\tClass: Arrow\n\tfrom_task ---> to_task\n\n\tOpts:\n\t\tgantt (Gantt object)\n\t\tfrom_task (Bar object)\n\t\tto_task (Bar object)\n*/\n\nexport default function Arrow(gt, from_task, to_task) {\n\n\tconst self = {};\n\n\tfunction init() {\n\t\tself.from_task = from_task;\n\t\tself.to_task = to_task;\n\t\tprepare();\n\t\tdraw();\n\t}\n\n\tfunction prepare() {\n\n\t\tself.start_x = from_task.$bar.getX() + from_task.$bar.getWidth() / 2;\n\n\t\tconst condition = () =>\n\t\t\tto_task.$bar.getX() < self.start_x + gt.config.padding &&\n\t\t\t\tself.start_x > from_task.$bar.getX() + gt.config.padding;\n\n\t\twhile(condition()) {\n\t\t\tself.start_x -= 10;\n\t\t}\n\n\t\tself.start_y = gt.config.header_height + gt.config.bar.height +\n\t\t\t(gt.config.padding + gt.config.bar.height) * from_task.task._index +\n\t\t\tgt.config.padding;\n\n\t\tself.end_x = to_task.$bar.getX() - gt.config.padding / 2;\n\t\tself.end_y = gt.config.header_height + gt.config.bar.height / 2 +\n\t\t\t(gt.config.padding + gt.config.bar.height) * to_task.task._index +\n\t\t\tgt.config.padding;\n\n\t\tconst from_is_below_to = (from_task.task._index > to_task.task._index);\n\t\tself.curve = gt.config.arrow.curve;\n\t\tself.clockwise = from_is_below_to ? 1 : 0;\n\t\tself.curve_y = from_is_below_to ? -self.curve : self.curve;\n\t\tself.offset = from_is_below_to ?\n\t\t\tself.end_y + gt.config.arrow.curve :\n\t\t\tself.end_y - gt.config.arrow.curve;\n\n\t\tself.path =\n\t\t\tSnap.format('M {start_x} {start_y} V {offset} ' +\n\t\t\t\t'a {curve} {curve} 0 0 {clockwise} {curve} {curve_y} ' +\n\t\t\t\t'L {end_x} {end_y} m -5 -5 l 5 5 l -5 5',\n\t\t\t\t{\n\t\t\t\t\tstart_x: self.start_x,\n\t\t\t\t\tstart_y: self.start_y,\n\t\t\t\t\tend_x: self.end_x,\n\t\t\t\t\tend_y: self.end_y,\n\t\t\t\t\toffset: self.offset,\n\t\t\t\t\tcurve: self.curve,\n\t\t\t\t\tclockwise: self.clockwise,\n\t\t\t\t\tcurve_y: self.curve_y\n\t\t\t\t});\n\n\t\tif(to_task.$bar.getX() < from_task.$bar.getX() + gt.config.padding) {\n\t\t\tself.path =\n\t\t\t\tSnap.format('M {start_x} {start_y} v {down_1} ' +\n\t\t\t\t'a {curve} {curve} 0 0 1 -{curve} {curve} H {left} ' +\n\t\t\t\t'a {curve} {curve} 0 0 {clockwise} -{curve} {curve_y} V {down_2} ' +\n\t\t\t\t'a {curve} {curve} 0 0 {clockwise} {curve} {curve_y} ' +\n\t\t\t\t'L {end_x} {end_y} m -5 -5 l 5 5 l -5 5',\n\t\t\t\t\t{\n\t\t\t\t\t\tstart_x: self.start_x,\n\t\t\t\t\t\tstart_y: self.start_y,\n\t\t\t\t\t\tend_x: self.end_x,\n\t\t\t\t\t\tend_y: self.end_y,\n\t\t\t\t\t\tdown_1: gt.config.padding / 2 - self.curve,\n\t\t\t\t\t\tdown_2: to_task.$bar.getY() + to_task.$bar.getHeight() / 2 - self.curve_y,\n\t\t\t\t\t\tleft: to_task.$bar.getX() - gt.config.padding,\n\t\t\t\t\t\toffset: self.offset,\n\t\t\t\t\t\tcurve: self.curve,\n\t\t\t\t\t\tclockwise: self.clockwise,\n\t\t\t\t\t\tcurve_y: self.curve_y\n\t\t\t\t\t});\n\t\t}\n\t}\n\n\tfunction draw() {\n\t\tself.element = gt.canvas.path(self.path)\n\t\t\t.attr('data-from', self.from_task.task.id)\n\t\t\t.attr('data-to', self.to_task.task.id);\n\t}\n\n\tfunction update() { // eslint-disable-line\n\t\tprepare();\n\t\tself.element.attr('d', self.path);\n\t}\n\tself.update = update;\n\n\tinit();\n\n\treturn self;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/eslint-loader!./src/Arrow.js\n **/"],"sourceRoot":""}